<section class="gallery-page relative min-h-screen overflow-hidden bg-gradient-to-b from-[#FAF9F0] to-[#FFFDF8] py-16 px-4">
  <div class="pointer-events-none absolute inset-0" aria-hidden="true">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(209,178,128,0.12),_transparent_58%)]"></div>
    <div class="absolute -top-24 left-1/2 h-72 w-72 -translate-x-1/2 rounded-full bg-white/60 blur-3xl"></div>
    <div class="absolute bottom-0 right-0 h-96 w-96 translate-x-1/3 rounded-full bg-[#D1B280]/15 blur-[160px]"></div>
  </div>

  <div class="relative mx-auto flex max-w-4xl flex-col items-center text-center space-y-5 animate-[fadeInUp_0.6s_ease]">
    <p class="text-xs uppercase tracking-[0.45em] text-[#6C6C6C]">Curated Moments</p>
    <h1 class="text-4xl font-semibold text-[#2F2F2F] md:text-5xl">Our Celebration Gallery</h1>
    <div class="accent-line"></div>
    <p class="text-lg text-[#6C6C6C]">A glimpse into the magical moments we helped create.</p>
  </div>

  <div class="relative mx-auto mt-10 flex max-w-4xl flex-wrap items-center justify-center gap-3 text-sm">
    @for (category of categories; track category) {
      <button
        type="button"
        class="rounded-full border border-[#E5E5E5] px-5 py-2 font-semibold transition-all duration-300 ease-in-out"
        [ngClass]="{
          'bg-[#D1B280] text-white shadow-lg shadow-[#D1B280]/30 border-[#D1B280]': selectedCategory === category,
          'bg-white text-[#2F2F2F] hover:border-[#D1B280] hover:text-[#D1B280]': selectedCategory !== category
        }"
        (click)="setCategory(category)"
      >
        {{ category }}
      </button>
    }
  </div>

  <div class="relative mx-auto mt-12 max-w-6xl">
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      @for (image of filteredImages; track image.id) {
        <article
          class="group relative overflow-hidden rounded-2xl bg-white shadow-[0_8px_32px_rgba(209,178,128,0.15)] transition-all duration-500 ease-in-out hover:-translate-y-1 hover:shadow-[0_18px_45px_rgba(209,178,128,0.2)]"
          (click)="openLightbox(image)"
        >
          <div class="relative">
            <img
              [src]="image.image"
              [alt]="image.title"
              class="h-64 w-full object-cover transition duration-500 ease-in-out group-hover:scale-105"
              loading="lazy"
              decoding="async"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-[#1a1a1a]/70 via-transparent to-transparent opacity-80 transition duration-500 ease-in-out group-hover:bg-[#D1B280]/20"></div>
            <div class="absolute inset-0 flex flex-col justify-end p-6 text-white">
              <p class="text-sm uppercase tracking-[0.3em] text-white/80">{{ image.type }}</p>
              <p class="text-2xl font-semibold">{{ image.title }}</p>
              <div class="mt-2 flex items-center justify-between text-sm text-white/80">
                <span>{{ image.location }}</span>
                <span>{{ image.date }}</span>
              </div>
            </div>
            <button
              type="button"
              class="absolute right-4 top-4 inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/80 text-[#D1B280] opacity-0 transition duration-300 ease-in-out group-hover:opacity-100"
              aria-label="View more"
            >
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.35-4.35" />
              </svg>
            </button>
          </div>
        </article>
      }
    </div>
    @if (!filteredImages.length) {
      <p class="mt-10 text-center text-[#6C6C6C]">We are curating fresh memories for this category. Check back soon!</p>
    }
  </div>

  <div class="relative mx-auto mt-16 w-full max-w-5xl rounded-[2rem] border border-[#E5E5E5] bg-gradient-to-r from-[#D1B280]/20 to-[#E2C9A3]/10 px-8 py-12 text-center shadow-[0_20px_60px_rgba(209,178,128,0.18)]">
    <h2 class="text-3xl font-semibold text-[#2F2F2F]">Plan your next beautiful celebration with us.</h2>
    <p class="mt-3 text-[#6C6C6C]">From intimate gatherings to grand milestones, we craft immersive experiences filled with meaning.</p>
    <a
      routerLink="/create-event"
      class="mt-6 inline-flex min-h-[48px] items-center justify-center gap-2 rounded-full bg-[#D1B280] px-8 py-3 text-base font-semibold text-white shadow-[0_18px_40px_rgba(209,178,128,0.35)] transition-all duration-300 hover:-translate-y-0.5 hover:bg-gradient-to-r hover:from-[#D1B280] hover:to-[#E2C9A3]"
    >
      Start Planning
      <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 12h14" />
        <path d="m12 5 7 7-7 7" />
      </svg>
    </a>
  </div>

  @if (activeImage) {
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm">
      <button
        type="button"
        class="absolute right-6 top-6 inline-flex h-12 w-12 items-center justify-center rounded-full border border-white/40 text-white transition hover:bg-white/10"
        aria-label="Close lightbox"
        (click)="closeLightbox()"
      >
        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 6 6 18" />
          <path d="M6 6l12 12" />
        </svg>
      </button>
      <div class="w-full max-w-4xl rounded-[1.5rem] bg-white/95 p-4 shadow-[0_20px_60px_rgba(0,0,0,0.4)]">
        <img
          [src]="activeImage?.image"
          [alt]="activeImage?.title"
          class="h-[480px] w-full rounded-[1.2rem] object-cover"
          loading="eager"
          decoding="async"
        />
        <div class="mt-4 flex flex-col gap-1 text-center text-[#2F2F2F]">
          <p class="text-xs uppercase tracking-[0.3em] text-[#6C6C6C]">{{ activeImage?.type }}</p>
          <p class="text-2xl font-semibold">{{ activeImage?.title }}</p>
          <p class="text-sm text-[#6C6C6C]">{{ activeImage?.location }} Â· {{ activeImage?.date }}</p>
        </div>
      </div>
    </div>
  }
</section>
