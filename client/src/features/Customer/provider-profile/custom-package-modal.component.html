<div class="fixed inset-0 z-50 flex items-center justify-center px-4" role="dialog" aria-modal="true">
  <div class="absolute inset-0 bg-[#1f1910]/60 backdrop-blur-sm" (click)="dismiss()"></div>
  <article
    class="relative z-10 w-full max-w-3xl rounded-[32px] bg-white p-6 shadow-[0_25px_60px_rgba(47,47,47,0.2)]"
  >
    <header class="flex items-start justify-between gap-4 border-b border-[#E7DFD0] pb-4">
      <div>
        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-[#D1B280]">design studio</p>
        <h2 class="text-2xl font-semibold text-[#2F2F2F]">
          ✨ Design My Package @if (providerName) { <span>{{ providerName }}</span> } @else { Provider }
        </h2>
      </div>
      <button
        class="text-sm font-semibold text-[#6C6C6C]"
        type="button"
        (click)="dismiss()"
        aria-label="Close package dialog"
      >
        Close ✕
      </button>
    </header>
    <p class="mt-3 text-sm text-[#6C6C6C]">
      Select curated add-ons and we will weave them into a bespoke narrative for your celebration.
    </p>

    <section class="mt-6 grid gap-4">
  @for (option of addOns; track option) {
        <label
          class="flex justify-between gap-3 rounded-2xl border border-[#E6DFCE] bg-[#FFFDF8] p-4 text-sm font-medium text-[#2F2F2F] transition hover:border-[#D1B280]"
        >
          <div>
            <p class="text-base font-semibold text-[#2F2F2F]">{{ option.label }}</p>
            <p class="text-xs text-[#6C6C6C]">{{ option.description }}</p>
          </div>
          <div class="flex items-center gap-2">
            <span class="text-base font-semibold text-[#2F2F2F]">₹{{ option.price | number: '1.0-0' }}</span>
            <input
              type="checkbox"
              class="h-4 w-4 accent-[#D1B280]"
              [checked]="isSelected(option.id)"
              (change)="toggleService(option.id)"
            />
          </div>
        </label>
      }
    </section>

    <section class="mt-6">
      <label class="text-xs font-semibold uppercase tracking-[0.3em] text-[#6C6C6C]">notes</label>
      <textarea
        rows="4"
        class="mt-2 w-full rounded-2xl border border-[#E6DFCE] bg-[#FBF9F5] p-4 text-sm text-[#2F2F2F] focus:border-[#D1B280] focus:outline-none"
        placeholder="Capture the hues, the vows, or the playlist you crave."
        [value]="notes()"
        (input)="onNotesChange($event)"
      ></textarea>
    </section>

    <div class="mt-4 flex items-center justify-between border-t border-[#E6DFCE] pt-4 text-sm text-[#6C6C6C]">
      <span>Estimated investment</span>
      <span class="text-lg font-semibold text-[#2F2F2F]">₹{{ total() | number: '1.0-0' }}</span>
    </div>

    @if (!hasSelection()) {
      <p class="mt-2 text-center text-xs text-[#D87E12]">
        Pick at least one experience to enable the request.
      </p>
    }

    <button
      class="mt-6 w-full rounded-full bg-gradient-to-r from-[#D1B280] to-[#B8865F] px-8 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white shadow-[0_15px_45px_rgba(209,178,128,0.35)] transition hover:scale-[1.01] disabled:cursor-not-allowed disabled:opacity-60"
      type="button"
      (click)="submit()"
      [disabled]="!hasSelection()"
    >
      Send Request to Provider
    </button>

    <button
      class="mt-3 w-full rounded-full border border-[#D1B280] px-8 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-[#2F2F2F]"
      type="button"
      (click)="dismiss()"
    >
      Cancel
    </button>
  </article>
</div>
