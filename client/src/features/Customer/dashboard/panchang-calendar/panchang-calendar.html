<div class="calendar-container">
  <div class="calendar-header">
    <button (click)="previousMonth()">&#9664;</button>
    <h2 class="panel-title">
      <!-- small sun/calendar icon -->
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M12 8a4 4 0 100 8 4 4 0 000-8z" fill="#a66f3a"/>
        <path d="M12 2v2M12 20v2M4.9 4.9l1.4 1.4M17.7 17.7l1.4 1.4M2 12h2M20 12h2M4.9 19.1l1.4-1.4M17.7 6.3l1.4-1.4" stroke="#c19a6b" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      {{ monthNames[currentDate.getMonth()] }} {{ currentDate.getFullYear() }}
    </h2>
    <button (click)="nextMonth()">&#9654;</button>
  </div>
  <!-- legend moved up under header for quick reference -->
  <div class="legend">
    <div class="item"><span class="color-public"></span> Public Holiday</div>
    <div class="item"><span class="color-bank"></span> Bank Holiday</div>
    <div class="item"><span class="color-merc"></span> Mercantile</div>
  </div>

  <div class="calendar-grid">
    <div *ngFor="let day of weekDays" class="week-day">{{ day }}</div>
    <div *ngFor="let day of daysInMonth"
      class="day-cell"
      [class.today]="isToday(day)"
      [class.holiday]="day.holiday"
      [ngClass]="getNgClass(day)"
      (click)="selectDate(day.num)">
      <div class="day-inner">
        <div class="day-num">{{ day.num }}</div>
        <!-- fill color applied to the whole cell now; dot removed for clarity -->
      </div>
      <div class="holiday-tooltip" *ngIf="day.holiday">
        <div class="holiday-title">{{ day.holiday.summary }}</div>
        <div class="holiday-cats">{{ (day.holiday.categories || []).join(' â€¢ ') }}</div>
      </div>
    </div>
  </div>
</div>

<div class="location-selector">
  <label for="loc">Search location (city, place)</label>
  <div class="loc-search">
    <input id="loc" type="search" [(ngModel)]="locationQuery" placeholder="e.g. Chennai, India" />
    <button type="button" (click)="searchLocation()">Search</button>
  </div>

  <ul class="results" *ngIf="searchResults.length">
    <li *ngFor="let r of searchResults" (click)="selectLocation(r)">
      {{ r.display_name }}
      <small>{{ r.lat }}, {{ r.lon }}</small>
    </li>
  </ul>

  <div class="selected" *ngIf="selectedLocation">
    <strong>Selected:</strong> {{ selectedLocation.display_name }}
    <div class="coords">Lat: {{ selectedLocation.lat }}, Lon: {{ selectedLocation.lon }}</div>
  </div>

  <p class="hint">Select location first, then pick a date to fetch Panchang details.</p>
</div>

<!-- legend moved above calendar-grid (kept for small screens) -->
