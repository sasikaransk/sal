<!-- Navbar moved to the Customer layout to ensure consistent layout and route protection -->

<section class="custdash-page">
  <!-- Hero / Welcome -->
  <header class="custdash-hero">
    <div class="hero-copy">
      <span class="eyebrow">Dashboard</span>
      <h1>Welcome back, {{ displayName() }}</h1>
      <p>Here's what's happening with your events.</p>
    </div>
    <div class="hero-actions" aria-label="Quick actions">
      <a routerLink="/create-event" class="btn-primary" aria-label="Create a new event">
        <svg viewBox="0 0 24 24" aria-hidden="true" class="icon"><path fill="currentColor" d="M12 5a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H6a1 1 0 110-2h5V6a1 1 0 011-1z"/></svg>
        <span>Create Event</span>
      </a>
      <a routerLink="/" class="btn-ghost" aria-label="Back to home">
        <svg viewBox="0 0 24 24" aria-hidden="true" class="icon"><path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
        <span>Back to Home</span>
      </a>
    </div>
  </header>

  <!-- Stats -->
  <section class="custdash-stats">
    <div class="stat-card">
      <p class="label">Total Events Booked</p>
      <p class="value">{{ stats.totalBooked }}</p>
    </div>
    <div class="stat-card">
      <p class="label">Active Events</p>
      <p class="value">{{ stats.activeEvents }}</p>
    </div>
    <div class="stat-card">
      <p class="label">Pending Payments</p>
      <p class="value">{{ stats.pendingPayments }}</p>
    </div>
    <div class="stat-card">
      <p class="label">Spend Overview</p>
      <p class="value">{{ stats.spendOverview }}</p>
    </div>
  </section>

  <div class="custdash-grid">
    <!-- Upcoming Event -->
    <section class="panel panel--main panel--wedding">
      <div class="panel-media">
  <img [src]="upcomingEvent.image" alt="{{ upcomingEvent.title }}" title="{{ upcomingEvent.title }}" />
        <div class="badge">Wedding</div>
      </div>
      <div class="panel-body">
        <h3>{{ upcomingEvent.title }}</h3>
        <ul class="meta" role="list">
          <li role="listitem">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M6.75 3A.75.75 0 0 0 6 3.75v1.5a.75.75 0 0 0 1.5 0v-1.5A.75.75 0 0 0 6.75 3Zm9.75.75a.75.75 0 0 1 1.5 0v1.5a.75.75 0 0 1-1.5 0v-1.5ZM3.75 7.5A2.25 2.25 0 0 1 6 5.25h12A2.25 2.25 0 0 1 20.25 7.5v9A2.25 2.25 0 0 1 18 18.75H6A2.25 2.25 0 0 1 3.75 16.5v-9Zm2.25 1.5A.75.75 0 0 0 5.25 9.75v6a.75.75 0 0 0 1.5 0v-6a.75.75 0 0 0-.75-.75Zm3 .75a.75.75 0 0 1 1.5 0v6a.75.75 0 0 1-1.5 0v-6Zm4.5-.75a.75.75 0 0 0-.75.75v6a.75.75 0 0 0 1.5 0v-6a.75.75 0 0 0-.75-.75Zm3 .75a.75.75 0 0 1 1.5 0v6a.75.75 0 0 1-1.5 0v-6Z"/></svg>
            <span>{{ upcomingEvent.dateText }}</span>
          </li>
          <li role="listitem">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2.25c-4.28 0-7.75 3.47-7.75 7.75 0 4.28 3.47 7.75 7.75 7.75s7.75-3.47 7.75-7.75c0-4.28-3.47-7.75-7.75-7.75Zm0 10.25a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5Z"/></svg>
            <span>{{ upcomingEvent.venue }}</span>
          </li>
        </ul>

        <div class="progress">
          <div class="bar" [style.width.%]="upcomingEvent.progress"></div>
        </div>

        <div class="actions">
          <a routerLink="/events" class="btn-primary">View Details</a>
          <a routerLink="/create-event" class="btn-ghost">Book Event</a>
        </div>
      </div>
    </section>

    <!-- Panchang Details (moved to sit to the right of the main wedding panel) -->
    <section class="panel panel--panchang-details">
      <app-panchang-details [panchangData]="panchangData"></app-panchang-details>
    </section>

    <!-- Panchang Calendar -->
    <section class="panel panel--panchang-calendar">
      <h3 class="panel-title">Tamil Calendar</h3>
      <app-panchang-calendar (dateSelected)="onDateSelected($event)"></app-panchang-calendar>
    </section>

    <!-- Recent Bookings (moved down) -->
    <section class="panel panel--recent-bookings">
      <h3 class="panel-title">Recent Bookings</h3>
      <div class="list">
        <div *ngFor="let b of recentBookings" class="list-item">
          <img [src]="b.image" alt="{{ b.title }}" title="{{ b.title }}" />
          <div class="list-body">
            <p class="title">{{ b.title }}</p>
            <div class="tags">
              <span *ngFor="let t of b.tags" class="tag">{{ t }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Quick Actions & Notifications -->
  <section class="custdash-bottom">
    <div class="panel">
      <h3 class="panel-title">Quick Actions</h3>
      <div class="actions actions--grid">
        <a routerLink="/create-event" class="btn-primary">Book Event</a>
        <button type="button" class="btn-ghost">Chat Planner</button>
        <button type="button" class="btn-ghost">Download Invoice</button>
        <button type="button" class="btn-ghost">Leave Feedback</button>
      </div>
    </div>

    <div class="panel">
      <h3 class="panel-title">Notifications</h3>
      <div class="notifications">
        <div *ngFor="let n of notifications" class="note">
          <span class="icon">{{ n.icon }}</span>
          <div class="note-body">
            <p class="text">{{ n.text }}</p>
            <p class="time">{{ n.time }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</section>
