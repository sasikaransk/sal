<section class="relative min-h-screen bg-gradient-to-b from-[#FAF9F0] to-[#FFFDF8] py-16 px-4">
  <div class="pointer-events-none absolute inset-0" aria-hidden="true">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(209,178,128,0.12),_transparent_58%)]"></div>
  </div>

  <div class="relative mx-auto max-w-6xl space-y-10">
    <header class="space-y-4 text-center">
      <p class="text-xs uppercase tracking-[0.45em] text-[#6C6C6C]">Create Event - Step 3</p>
      <h1 class="text-4xl font-semibold text-[#2F2F2F] md:text-5xl">Your Celebration Is Taking Shape</h1>
      <p class="text-lg text-[#6C6C6C]">Each service you've chosen brings your vision closer to life.</p>
      <div class="mx-auto h-1 w-40 rounded-full bg-gradient-to-r from-[#D1B280] to-[#E2C9A3]"></div>
      <p class="text-sm text-[#6C6C6C]">
        You've curated <span class="font-semibold text-[#2F2F2F]">{{ selectedServiceIds.length }}</span> categories. Explore
        providers when you're ready.
      </p>
    </header>

    @if (selectedServiceIds.length) {
      <section class="space-y-4">
        <h2 class="text-xl font-semibold text-[#2F2F2F]">Your Selected Services</h2>
        <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
          @for (item of sorted(); track item.id) {
            @if (isSelected(item.id)) {
              <article
                class="group flex flex-col justify-between rounded-2xl border border-[#D1B280] bg-[#F4EADA]/50 p-6 shadow-[0_16px_40px_rgba(209,178,128,0.25)] transition-all duration-500 hover:-translate-y-1"
              >
                <div class="space-y-3">
                  <span
                    class="inline-flex h-12 w-12 items-center justify-center rounded-full border border-[#E5E5E5] bg-[#F9F6EE] text-[#D1B280]"
                  >
                    @switch (item.id) {
                      @case ('venue') {
                        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M3 21h18" />
                          <path d="M3 7l9-4 9 4" />
                          <path d="M5 21V10h14v11" />
                        </svg>
                      }
                      @case ('catering') {
                        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M3 14h18" />
                          <path d="M12 8a6 6 0 0 1 6 6H6a6 6 0 0 1 6-6Z" />
                          <path d="M12 2v4" />
                        </svg>
                      }
                      @case ('decor') {
                        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                          <circle cx="12" cy="12" r="3" />
                          <path d="M12 2v4M12 18v4M2 12h4M18 12h4" />
                          <path d="M4.2 4.2 7 7" />
                          <path d="m17 17 2.8 2.8" />
                          <path d="m4.2 19.8 2.8-2.8" />
                          <path d="M17 7l2.8-2.8" />
                        </svg>
                      }
                      @case ('photo') {
                        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M3 7h4l2-3h6l2 3h4v12H3z" />
                          <circle cx="12" cy="13" r="4" />
                        </svg>
                      }
                      @case ('music') {
                        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M9 18V5l12-2v13" />
                          <circle cx="6" cy="18" r="3" />
                          <circle cx="18" cy="16" r="3" />
                        </svg>
                      }
                      @case ('transport') {
                        <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M3 13l2-5h14l2 5" />
                          <path d="M5 13h14v6H5z" />
                          <circle cx="7.5" cy="18" r="1.5" />
                          <circle cx="16.5" cy="18" r="1.5" />
                        </svg>
                      }
                    }
                  </span>

                  <h3 class="text-lg font-semibold text-[#2F2F2F]">{{ item.name }}</h3>
                  <p class="text-sm text-[#6C6C6C]">{{ item.desc }}</p>
                  <p class="text-sm text-[#2F2F2F]">{{ item.emotionLine }}</p>
                  <p class="text-xs text-[#6C6C6C]">ðŸ’¡ {{ item.marketTip }}</p>

                  @if (item.tags?.length) {
                    <div class="mt-2 flex flex-wrap gap-2">
                      @for (tag of item.tags; track $index) {
                        <span class="rounded-full border border-[#E5E5E5] bg-white px-3 py-1 text-xs text-[#6C6C6C]">
                          {{ tag }}
                        </span>
                      }
                    </div>
                  }

                  <p class="mt-3 text-sm text-[#2F2F2F]">
                    <span class="font-semibold">{{ item.providerCount ?? 0 }}</span> providers available
                    @if (!countsLoaded()) { <span class="ml-2 shimmer-inline"></span> }
                  </p>
                </div>

                <button
                  type="button"
                  (click)="goToProviders(item.id)"
                  class="mt-6 inline-flex items-center justify-center rounded-full bg-[#D1B280] px-6 py-2 text-sm font-semibold text-white shadow hover:bg-[#C6A86F] transition-all duration-500"
                >
                  Explore Providers
                  <svg viewBox="0 0 24 24" class="ml-2 h-4 w-4" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14" />
                    <path d="m12 5 7 7-7 7" />
                  </svg>
                </button>
              </article>
            }
          }
        </div>
      </section>
    }

    <p class="mx-auto max-w-3xl text-center text-sm text-[#6C6C6C]">
      Behind every unforgettable celebration is a team of experts - decor that sets the mood, flavors that linger, music
      that moves, and memories captured forever. Explore what is possible.
    </p>

    @if (sorted().length > selectedServiceIds.length) {
      <section class="space-y-4">
        <h2 class="text-xl font-semibold text-[#2F2F2F]">You May Also Consider</h2>
        <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
          @for (item of sorted(); track item.id) {
            @if (!isSelected(item.id)) {
              <article
                class="group flex flex-col justify-between rounded-2xl border border-[#E5E5E5] bg-white p-6 transition-all duration-500 hover:-translate-y-1 hover:border-[#D1B280]/60 hover:shadow-lg hover:shadow-[#D1B280]/20"
              >
                <div class="space-y-3">
                  <span
                    class="inline-flex h-12 w-12 items-center justify-center rounded-full border border-[#E5E5E5] bg-[#F9F6EE] text-[#D1B280]"
                  >
                    <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="9" />
                    </svg>
                  </span>
                  <h3 class="text-lg font-semibold text-[#2F2F2F]">{{ item.name }}</h3>
                  <p class="text-sm text-[#6C6C6C]">{{ item.emotionLine }}</p>
                  <p class="text-xs text-[#6C6C6C]">ðŸ’¡ {{ item.marketTip }}</p>
                  <p class="mt-2 text-sm text-[#2F2F2F]">
                    <span class="font-semibold">{{ item.providerCount ?? 0 }}</span> providers available
                  </p>
                  <p class="text-xs text-[#6C6C6C]">Popular with hosts like you.</p>
                </div>

                <button
                  type="button"
                  (click)="goToProviders(item.id)"
                  class="mt-6 inline-flex items-center justify-center rounded-full border border-[#D1B280] px-6 py-2 text-sm font-semibold text-[#2F2F2F] transition-all duration-500 hover:bg-[#F4EADA]"
                >
                  Explore Providers
                </button>
              </article>
            }
          }
        </div>
      </section>
    }

    <div class="mt-10 flex flex-col items-center gap-3 border-t border-dashed border-[#E5E5E5] pt-6">
      <button
        type="button"
        (click)="startExploring()"
        class="inline-flex items-center justify-center rounded-full bg-[#D1B280] px-8 py-3 text-sm font-semibold text-white shadow-[0_20px_40px_rgba(209,178,128,0.45)] transition-all duration-500 hover:bg-gradient-to-r hover:from-[#D1B280] hover:to-[#E2C9A3]"
      >
        Start Exploring Providers
        <svg viewBox="0 0 24 24" class="ml-2 h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14" />
          <path d="m12 5 7 7-7 7" />
        </svg>
      </button>
      <a
        routerLink="/create-event/finalize"
        class="text-sm text-[#6C6C6C] transition-all duration-300 hover:text-[#2F2F2F]"
      >
        Skip exploration and finalize later â€º
      </a>
    </div>
  </div>
</section>
