<div class="min-h-screen bg-gradient-to-b from-[#FAF9F0] to-[#FFFDF8] px-4 py-10 text-[#2F2F2F]">
  <div *ngIf="toastMessage()" class="festivaz-toast fixed top-6 left-1/2 z-50 -translate-x-1/2 border border-[#E2C9A3] bg-[#FFF7EA] text-sm font-semibold text-[#2F2F2F] shadow-lg">
    {{ toastMessage() }}
  </div>

  <div class="mx-auto flex w-full max-w-6xl flex-col gap-6">
    <section
      class="relative overflow-hidden rounded-[2rem] border border-[#E5E5E5] bg-cover px-8 py-12 shadow-[0_25px_60px_rgba(47,47,47,0.12)]"
      [style.background-image]="heroBackground()"
      style="background-size: cover; background-position: center;"
    >
      <div class="absolute inset-0 bg-gradient-to-b from-white/80 via-white/50 to-white/90"></div>
      <div class="relative z-10 space-y-3 text-center">
        <nav class="text-sm text-[#6C6C6C]">
          Create Event › Providers › <span class="capitalize text-[#2F2F2F]">{{ category() }}</span>
        </nav>
        <h1 class="text-4xl font-semibold text-[#2F2F2F] leading-tight">Explore {{ category() | titlecase }} for Your Celebration</h1>
        <p class="mx-auto max-w-2xl text-[#6C6C6C]">Every expert here helps turn your moments into memories.</p>
        <div class="mx-auto h-1 w-32 rounded-full bg-gradient-to-r from-[#D1B280] to-[#E2C9A3]"></div>
        <p class="text-sm text-[#6C6C6C]">Let this collection keep you steady on the path to a luminous day.</p>
      </div>
    </section>

    <section class="space-y-6">
      <div class="rounded-3xl border border-[#E5E5E5] bg-white/70 px-4 py-4 shadow-[0_20px_40px_rgba(15,23,42,0.08)]">
        <div class="grid gap-3 md:grid-cols-4">
          <div class="md:col-span-2">
            <label class="sr-only">Search providers</label>
            <input
              class="w-full rounded-2xl border border-[#E5E5E5] bg-white px-4 py-3 text-sm text-[#2F2F2F] placeholder:text-[#B8A98E] shadow-sm transition focus:border-[#D1B280] focus:outline-none"
              placeholder="Search by name, tag, or city..."
              [value]="query()"
              (input)="onSearch($any($event.target).value)"
            />
          </div>
          <div>
            <label class="sr-only">Minimum rating</label>
            <select
              class="w-full rounded-2xl border border-[#E5E5E5] bg-white px-4 py-3 text-sm text-[#2F2F2F] focus:border-[#D1B280] focus:outline-none"
              [value]="minRating()"
              (change)="onMinRatingChange($any($event.target).value)"
            >
              <option *ngFor="let option of ratingOptions" [value]="option.value">{{ option.label }}</option>
            </select>
          </div>
          <div>
            <label class="sr-only">Sort providers</label>
            <select
              class="w-full rounded-2xl border border-[#E5E5E5] bg-white px-4 py-3 text-sm text-[#2F2F2F] focus:border-[#D1B280] focus:outline-none"
              [value]="sortKey()"
              (change)="onSortChange($any($event.target).value)"
            >
              <option *ngFor="let option of sortOptions" [value]="option.value">{{ option.label }}</option>
            </select>
          </div>
        </div>
      </div>
      <ng-container *ngIf="loading(); else loaded">
        <div class="flex flex-col items-center gap-4 rounded-[2rem] border border-dashed border-[#D1B280]/60 bg-white/80 py-14 text-[#6C6C6C]">
          <div class="gold-spinner"></div>
          <p class="text-sm font-semibold text-[#2F2F2F]">Gathering trusted {{ category() | titlecase }} partners...</p>
        </div>
      </ng-container>

      <ng-template #loaded>
        <div *ngIf="filtered().length === 0; else listView" class="flex flex-col items-center gap-4 rounded-[2rem] border-2 border-dashed border-[#D1B280]/70 bg-white/80 py-12 text-center text-[#6C6C6C]">
          <svg class="h-12 w-12 text-[#D1B280]" viewBox="0 0 64 64" fill="none" stroke="#D1B280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M32 10l5 12 13 2-10 10 2 13-12-6-12 6 2-13-10-10 13-2z" />
          </svg>
          <h3 class="text-lg font-semibold text-[#2F2F2F]">We’re curating trusted {{ category() | titlecase }} partners — check back soon.</h3>
          <p class="text-sm">In the meantime, assemble your inspiration board and share it with co-hosts.</p>
        </div>
      </ng-template>

      <ng-template #listView>
        <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
          <article *ngFor="let provider of filtered(); let idx = index"
            class="provider-card flex flex-col gap-5 rounded-[2rem] border border-[#E5E5E5] bg-white p-5 transition duration-300 hover:-translate-y-1 hover:shadow-[0_12px_40px_rgba(209,178,128,0.35)]"
            [style.animation-delay]="(idx * 0.1) + 's'">
            <div class="overflow-hidden rounded-[1.25rem]">
              <img
                [src]="provider.coverUrl"
                [alt]="provider.name"
                class="h-48 w-full object-cover transition duration-500 hover:scale-105"
              />
            </div>
            <div class="space-y-2">
              <div class="flex items-start justify-between gap-4">
                <div>
                  <h3 class="text-xl font-semibold text-[#2F2F2F]">{{ provider.name }}</h3>
                  <p class="text-sm uppercase tracking-[0.2em] text-[#6C6C6C]">{{ provider.city }}</p>
                </div>
                <span *ngIf="provider.verified" class="flex items-center gap-1 rounded-full border border-[#D1B280] px-3 py-1 text-xs font-semibold text-[#D1B280]">
                  <svg class="h-3 w-3 flex-shrink-0" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 11l3 3 7-7" />
                  </svg>
                  Verified
                </span>
              </div>
              <div class="flex items-center gap-2 text-sm font-semibold text-[#2F2F2F]">
                <svg class="h-4 w-4 flex-shrink-0 text-[#D1B280]" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                </svg>
                <span>{{ provider.rating | number:'1.1-1' }}</span>
                <span class="text-[#6C6C6C]">({{ provider.reviews }} reviews)</span>
              </div>
              <p class="text-sm text-[#6C6C6C]">{{ provider.tagline }}</p>
              <div class="text-sm font-semibold text-[#2F2F2F]">Rs {{ provider.priceMin | number:'1.0-0' }} – Rs {{ provider.priceMax | number:'1.0-0' }}</div>
              <div class="flex flex-wrap gap-2 text-xs font-medium text-[#6C6C6C]">
                <span *ngFor="let tag of provider.tags ?? []" class="rounded-full border border-[#E5E5E5] bg-[#FFF8F2] px-3 py-1 text-[#6C6C6C] tracking-wide">{{ tag }}</span>
              </div>
            </div>
            <div class="flex flex-wrap gap-3 pt-2">
              <button
                type="button"
                class="flex-1 rounded-full border border-[#D1B280] px-4 py-2 text-sm font-semibold text-[#2F2F2F] transition hover:-translate-y-0.5"
                (click)="viewProfile(provider.id)"
              >
                View Profile
              </button>
              <button
                type="button"
                class="flex-1 rounded-full bg-gradient-to-r from-[#D1B280] to-[#E2C9A3] px-4 py-2 text-sm font-semibold uppercase text-[#2F2F2F] transition hover:-translate-y-0.5"
                (click)="bookNow(provider)"
              >
                Book Now
              </button>
            </div>
          </article>
        </div>
      </ng-template>

      <section class="rounded-3xl border border-[#E5E5E5] bg-white p-5 shadow-[0_12px_30px_rgba(47,47,47,0.08)]">
        <p class="text-xs font-semibold uppercase tracking-[0.4em] text-[#D1B280]">Insider Tip</p>
        <h3 class="mt-2 text-lg font-semibold text-[#2F2F2F]">{{ category() | titlecase }} Advice</h3>
        <p class="mt-1 text-sm text-[#6C6C6C]">{{ insightMessage() }}</p>
      </section>

      <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <a
          class="flex w-full items-center justify-center rounded-full border border-[#D1B280] px-6 py-3 text-sm font-semibold text-[#2F2F2F] transition hover:-translate-y-0.5 md:w-auto"
          routerLink="/create-event/overview"
        >
          ← Back to Overview
        </a>
        <a
          class="flex w-full items-center justify-center rounded-full bg-gradient-to-r from-[#D1B280] to-[#E2C9A3] px-6 py-3 text-sm font-semibold uppercase text-[#2F2F2F] transition hover:-translate-y-0.5 md:w-auto"
          routerLink="/create-event/finalize"
        >
          Finalize My Event ›
        </a>
      </div>
    </section>
  </div>

  <div
    class="fixed bottom-6 right-4 z-40 flex items-center gap-2 rounded-full border border-[#E5E5E5] bg-white/95 px-5 py-2 text-sm font-semibold text-[#2F2F2F] shadow-[0_10px_40px_rgba(209,178,128,0.18)] backdrop-blur md:bottom-8 md:right-8"
  >
    {{ filtered().length }} providers · avg {{ avgRating() | number:'1.1-1' }} ★
  </div>
</div>
